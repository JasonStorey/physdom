<!DOCTYPE html>
<html>
  <head>
    <title>cannon.js - bounce demo</title>
    <meta charset="utf-8">
    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            perspective: 10000px;
        }
        .plane-body {
            background-color: blue;
            width: 100px;
            height: 100px;
        }
    </style>
  </head>
  <body>
    <div id="test" class="plane-body"></div>
    <script src="./lib/Oimo.min.js"></script>
    <script>

        function Body() {
            this.el = document.getElementById('test');
            this.shape = new OIMO.Body({
                type: 'box',
                size: [100, 100, 10],
                pos: [0, 0, 0],
                move: true,
                world: world
            });
        }

        Body.prototype.render = function render() {
            var matrix,
                m;

            if(this.shape.body.sleeping) {
                return;
            }
            
            matrix = this.shape.body.getMatrix();

            // m =[matrix[0], matrix[4], matrix[8],  matrix[12],
            //     matrix[1], matrix[5], matrix[9],  matrix[13],
            //     matrix[2], matrix[6], matrix[10], matrix[14],
            //     matrix[3], matrix[7], matrix[11], matrix[15]];

            m =[matrix[0], matrix[1], matrix[2],  matrix[3],
                matrix[4], matrix[5], matrix[6],  matrix[7],
                matrix[8], matrix[9], matrix[10], matrix[11],
                matrix[12], matrix[13], matrix[14], matrix[15] + 1];

            this.el.style.transform = 'matrix3d(' + m.toString() + ')';
        };

        var world = new OIMO.World();
        world.gravity = new OIMO.Vec3(0, 1, 0);
        var ground = new OIMO.Body({size:[10, 1, 100], pos:[0,400,0], world:world});
        var ground2 = new OIMO.Body({size:[1000, 100, 1000], pos:[0,600,0], world:world});
        var body = new Body();

        function animate(t) {
            body.render();
            world.step();
            window.requestAnimationFrame(animate);
        }
    
        animate(0);
    </script>
  </body>
</html>